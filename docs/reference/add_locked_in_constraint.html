<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Add locked in constraints <U+2014> add_locked_in_constraint <e2><80><a2> prioritizrutils</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">prioritizrutils</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/prioritizr/prioritizrutils">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Add locked in constraints</h1>
    </div>

    
    <p>Add constraints constraints to lock in planning units
so that they are selected in the solution. For example, it may
be desirable to lock in planning units already within existing
protected areas so that the solutions fills in the gaps in the existing
reserve network.</p>
    

    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <dl class="dl-horizontal">
      <dt>x</dt>
      <dd><code><a href='ConservationProblem.html'>ConservationProblem</a></code> object.</dd>
      <dt>locked_in</dt>
      <dd>Object that determines which planning units that should be 
locked in. See details for more information.</dd>
    </dl>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code><a href='ConservationProblem.html'>ConservationProblem</a></code> object.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The locked in planning units can be specified in several 
  different ways:</p>
    <p><dl class='dl-horizontal'></p>
    <p><dt><code>integer</code> <code>vector</code></dt><dd>indices for which planning units should
    be locked in.</dd></p>
    <p><dt><code>character</code></dt><dd>column name in the attribute table with 
    <code>logical</code> values indicating if planning units should be locked in. 
    Note that <code>locked_in</code> can only a <code>character</code> if the planning
    units in <code>x</code> are a <code>SpatialPolygonsDataFrame-class</code>, 
    <code>SpatialLinesDataFrame-class</code>, or 
    <code>SpatialPointsDataFrame-class</code> object.</dd></p>
    <p><dt><code><a href='http://www.rdocumentation.org/packages/raster/topics/Raster-classes'>Raster-class</a></code> object</dt><dd>Planning units in <code>x</code> 
    that intersect with cells in <code>y</code> that are not equal to zero and 
    not <code>NA</code> are locked in.</dd></p>
    <p><dt><code><a href='http://www.rdocumentation.org/packages/sp/topics/Spatial-class'>Spatial-class</a></code> object.</dt><dd>planning units in <code>x</code> 
    that spatially intersect with <code>locked_in</code> are locked in.</dd></p>
    <p></dl></p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='constraints.html'>constraints</a></code> for all the available constraints.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># create basic problem</span>
<span class='no'>p1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='problem.html'>problem</a></span>(<span class='no'>sim_pu_polygons</span>, <span class='no'>sim_features</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='objectives.html'>add_minimum_set_objective</a></span>() <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='targets.html'>add_relative_targets</a></span>(<span class='fl'>0.2</span>)</div><div class='output co'>#&gt; <span class='message'>Loading required namespace: velox</span></div><div class='input'>
<span class='co'># create problem with added locked in constraints using integers</span>
<span class='no'>p2</span> <span class='kw'>&lt;-</span> <span class='no'>p1</span> <span class='kw'>%&gt;%</span> <span class='fu'>add_locked_in_constraint</span>(<span class='fu'>which</span>(<span class='no'>sim_pu_polygons</span>$<span class='no'>locked_in</span>))

<span class='co'># create problem with added locked in constraints using a field name</span>
<span class='no'>p3</span> <span class='kw'>&lt;-</span> <span class='no'>p1</span> <span class='kw'>%&gt;%</span> <span class='fu'>add_locked_in_constraint</span>(<span class='st'>'locked_in'</span>)

<span class='co'># create problem with added locked in constraints using raster data</span>
<span class='no'>p4</span> <span class='kw'>&lt;-</span> <span class='no'>p1</span> <span class='kw'>%&gt;%</span> <span class='fu'>add_locked_in_constraint</span>(<span class='no'>sim_locked_in_raster</span>)

<span class='co'># create problem with added locked in constraints using spatial polygons data</span>
<span class='no'>locked_in</span> <span class='kw'>&lt;-</span> <span class='no'>sim_pu_polygons</span>[<span class='no'>sim_pu_polygons</span>$<span class='no'>locked_in</span> <span class='kw'>==</span> <span class='fl'>1</span>,]
<span class='no'>p5</span> <span class='kw'>&lt;-</span> <span class='no'>p1</span> <span class='kw'>%&gt;%</span> <span class='fu'>add_locked_in_constraint</span>(<span class='no'>locked_in</span>)

<span class='co'># solve problems</span>
<span class='no'>s1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='solve.html'>solve</a></span>(<span class='no'>p1</span>)</div><div class='output co'>#&gt; Optimize a model with 5 rows, 90 columns and 450 nonzeros
#&gt; Variable types: 0 continuous, 90 integer (90 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 9e-01]
#&gt;   Objective range  [2e+02, 2e+02]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [6e+00, 1e+01]
#&gt; Found heuristic solution: objective 3811.64
#&gt; Presolve removed 0 rows and 10 columns
#&gt; Presolve time: 0.00s
#&gt; Presolved: 5 rows, 80 columns, 400 nonzeros
#&gt; Variable types: 0 continuous, 80 integer (80 binary)
#&gt; Presolved: 5 rows, 80 columns, 400 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 3.546286e+03, 8 iterations, 0.00 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0 3546.28612    0    3 3811.64191 3546.28612  6.96%     -    0s
#&gt; 
#&gt; Explored 0 nodes (8 simplex iterations) in 0.01 seconds
#&gt; Thread count was 1 (of 2 available processors)
#&gt; 
#&gt; Solution count 1: 3811.64 
#&gt; Pool objective bound 3546.29
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 3.811641906815e+03, best bound 3.546286124673e+03, gap 6.9617%</div><div class='input'><span class='no'>s2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='solve.html'>solve</a></span>(<span class='no'>p2</span>)</div><div class='output co'>#&gt; Optimize a model with 5 rows, 90 columns and 450 nonzeros
#&gt; Variable types: 0 continuous, 90 integer (90 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 9e-01]
#&gt;   Objective range  [2e+02, 2e+02]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [6e+00, 1e+01]
#&gt; Found heuristic solution: objective 3811.64
#&gt; Presolve removed 0 rows and 10 columns
#&gt; Presolve time: 0.00s
#&gt; Presolved: 5 rows, 80 columns, 400 nonzeros
#&gt; Variable types: 0 continuous, 80 integer (80 binary)
#&gt; Presolved: 5 rows, 80 columns, 400 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 3.546286e+03, 8 iterations, 0.00 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0 3546.28612    0    3 3811.64191 3546.28612  6.96%     -    0s
#&gt; 
#&gt; Explored 0 nodes (8 simplex iterations) in 0.01 seconds
#&gt; Thread count was 1 (of 2 available processors)
#&gt; 
#&gt; Solution count 1: 3811.64 
#&gt; Pool objective bound 3546.29
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 3.811641906815e+03, best bound 3.546286124673e+03, gap 6.9617%</div><div class='input'><span class='no'>s3</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='solve.html'>solve</a></span>(<span class='no'>p3</span>)</div><div class='output co'>#&gt; Optimize a model with 5 rows, 90 columns and 450 nonzeros
#&gt; Variable types: 0 continuous, 90 integer (90 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 9e-01]
#&gt;   Objective range  [2e+02, 2e+02]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [6e+00, 1e+01]
#&gt; Found heuristic solution: objective 3811.64
#&gt; Presolve removed 0 rows and 10 columns
#&gt; Presolve time: 0.00s
#&gt; Presolved: 5 rows, 80 columns, 400 nonzeros
#&gt; Variable types: 0 continuous, 80 integer (80 binary)
#&gt; Presolved: 5 rows, 80 columns, 400 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 3.546286e+03, 8 iterations, 0.00 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0 3546.28612    0    3 3811.64191 3546.28612  6.96%     -    0s
#&gt; 
#&gt; Explored 0 nodes (8 simplex iterations) in 0.01 seconds
#&gt; Thread count was 1 (of 2 available processors)
#&gt; 
#&gt; Solution count 1: 3811.64 
#&gt; Pool objective bound 3546.29
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 3.811641906815e+03, best bound 3.546286124673e+03, gap 6.9617%</div><div class='input'><span class='no'>s4</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='solve.html'>solve</a></span>(<span class='no'>p4</span>)</div><div class='output co'>#&gt; Optimize a model with 5 rows, 90 columns and 450 nonzeros
#&gt; Variable types: 0 continuous, 90 integer (90 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 9e-01]
#&gt;   Objective range  [2e+02, 2e+02]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [6e+00, 1e+01]
#&gt; Found heuristic solution: objective 3811.64
#&gt; Presolve removed 0 rows and 10 columns
#&gt; Presolve time: 0.00s
#&gt; Presolved: 5 rows, 80 columns, 400 nonzeros
#&gt; Variable types: 0 continuous, 80 integer (80 binary)
#&gt; Presolved: 5 rows, 80 columns, 400 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 3.546286e+03, 8 iterations, 0.00 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0 3546.28612    0    3 3811.64191 3546.28612  6.96%     -    0s
#&gt; 
#&gt; Explored 0 nodes (8 simplex iterations) in 0.01 seconds
#&gt; Thread count was 1 (of 2 available processors)
#&gt; 
#&gt; Solution count 1: 3811.64 
#&gt; Pool objective bound 3546.29
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 3.811641906815e+03, best bound 3.546286124673e+03, gap 6.9617%</div><div class='input'><span class='no'>s5</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='solve.html'>solve</a></span>(<span class='no'>p5</span>)</div><div class='output co'>#&gt; Optimize a model with 5 rows, 90 columns and 450 nonzeros
#&gt; Variable types: 0 continuous, 90 integer (90 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 9e-01]
#&gt;   Objective range  [2e+02, 2e+02]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [6e+00, 1e+01]
#&gt; Found heuristic solution: objective 3811.64
#&gt; Presolve removed 0 rows and 10 columns
#&gt; Presolve time: 0.00s
#&gt; Presolved: 5 rows, 80 columns, 400 nonzeros
#&gt; Variable types: 0 continuous, 80 integer (80 binary)
#&gt; Presolved: 5 rows, 80 columns, 400 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 3.546286e+03, 8 iterations, 0.00 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0 3546.28612    0    3 3811.64191 3546.28612  6.96%     -    0s
#&gt; 
#&gt; Explored 0 nodes (8 simplex iterations) in 0.01 seconds
#&gt; Thread count was 1 (of 2 available processors)
#&gt; 
#&gt; Solution count 1: 3811.64 
#&gt; Pool objective bound 3546.29
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 3.811641906815e+03, best bound 3.546286124673e+03, gap 6.9617%</div><div class='input'>
<span class='co'># plot solutions</span>
<span class='fu'>par</span>(<span class='kw'>mfrow</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='fl'>3</span>,<span class='fl'>2</span>))
<span class='fu'>plot</span>(<span class='no'>s1</span>, <span class='kw'>main</span><span class='kw'>=</span><span class='st'>'none locked out'</span>)
<span class='fu'>plot</span>(<span class='no'>s1</span>[<span class='no'>s1</span>$<span class='no'>solution</span><span class='kw'>==</span><span class='fl'>1</span>,], <span class='kw'>col</span><span class='kw'>=</span><span class='st'>'darkgreen'</span>, <span class='kw'>add</span><span class='kw'>=</span><span class='fl'>TRUE</span>)

<span class='fu'>plot</span>(<span class='no'>s2</span>, <span class='kw'>main</span><span class='kw'>=</span><span class='st'>'locked out (integer input)'</span>)
<span class='fu'>plot</span>(<span class='no'>s2</span>[<span class='no'>s2</span>$<span class='no'>solution</span><span class='kw'>==</span><span class='fl'>1</span>,], <span class='kw'>col</span><span class='kw'>=</span><span class='st'>'darkgreen'</span>, <span class='kw'>add</span><span class='kw'>=</span><span class='fl'>TRUE</span>)

<span class='fu'>plot</span>(<span class='no'>s3</span>, <span class='kw'>main</span><span class='kw'>=</span><span class='st'>'locked out (character input)'</span>)
<span class='fu'>plot</span>(<span class='no'>s3</span>[<span class='no'>s3</span>$<span class='no'>solution</span><span class='kw'>==</span><span class='fl'>1</span>,], <span class='kw'>col</span><span class='kw'>=</span><span class='st'>'darkgreen'</span>, <span class='kw'>add</span><span class='kw'>=</span><span class='fl'>TRUE</span>)

<span class='fu'>plot</span>(<span class='no'>s4</span>, <span class='kw'>main</span><span class='kw'>=</span><span class='st'>'locked out (raster input)'</span>)
<span class='fu'>plot</span>(<span class='no'>s4</span>[<span class='no'>s4</span>$<span class='no'>solution</span><span class='kw'>==</span><span class='fl'>1</span>,], <span class='kw'>col</span><span class='kw'>=</span><span class='st'>'darkgreen'</span>, <span class='kw'>add</span><span class='kw'>=</span><span class='fl'>TRUE</span>)

<span class='fu'>plot</span>(<span class='no'>s5</span>, <span class='kw'>main</span><span class='kw'>=</span><span class='st'>'locked out (polygon input)'</span>)
<span class='fu'>plot</span>(<span class='no'>s5</span>[<span class='no'>s5</span>$<span class='no'>solution</span><span class='kw'>==</span><span class='fl'>1</span>,], <span class='kw'>col</span><span class='kw'>=</span><span class='st'>'darkgreen'</span>, <span class='kw'>add</span><span class='kw'>=</span><span class='fl'>TRUE</span>)</div><img src='add_locked_in_constraint-14.png' alt='' width='540' height='400' /></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Jeffrey O Hanson, Richard Schuster, Matthew Strimas-Mackey, Peter Arcese, Joeseph Bennett.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
